# Performance Chart Variants
# Semantic matching for performance optimization workflow visualizations
# 5 variants covering different performance scenarios

variants:
  - id: performance_chart_001
    semantic_tags:
      - performance
      - query_optimization
      - database
      - postgresql
    context_requirements:
      must_have: ["odoo_version"]
      optional: ["database_size"]
    chart_complexity: medium
    performance_type: query_optimization
    chart_template: |
      flowchart TB
          Start([Slow Queries]) --> Identify[Identify Slow Queries]
          Identify --> Analyze[Analyze Execution Plans]
          Analyze --> Index[Create Missing Indexes]
          Index --> Rewrite[Rewrite Inefficient Queries]
          Rewrite --> Stats[Update Database Statistics]
          Stats --> Test[Performance Testing]
          Test --> End([Queries Optimized])

          classDef diagnosis fill:#ff9800,stroke:#f57c00,stroke-width:2px,color:#fff
          classDef optimization fill:#4caf50,stroke:#388e3c,stroke-width:2px,color:#fff
          classDef success fill:#d4edda,stroke:#28a745,stroke-width:2px

          class Identify,Analyze diagnosis
          class Index,Rewrite,Stats,Test optimization
          class Start,End success
    supplementary_charts:
      - id: performance_chart_001_profiling
        title: "Phase 1: Performance Profiling"
        placement_hint: "after_prerequisites"
        chart_template: |
          flowchart TB
              Start([Baseline]) --> Enable[Enable Query Logging]
              Enable --> Capture[Capture Performance Metrics]
              Capture --> Identify[Identify Bottlenecks]
              Identify --> Prioritize[Prioritize by Impact]
              Prioritize --> Document[Document Findings]
              Document --> End([Profile Complete])

              classDef profiling fill:#2196f3,stroke:#1976d2,stroke-width:2px,color:#fff
              classDef analysis fill:#ff9800,stroke:#f57c00,stroke-width:2px,color:#fff
              classDef success fill:#d4edda,stroke:#28a745,stroke-width:2px

              class Enable,Capture profiling
              class Identify,Prioritize,Document analysis
              class Start,End success

      - id: performance_chart_001_indexes
        title: "Phase 2: Index Strategy"
        placement_hint: "after_steps"
        chart_template: |
          flowchart TB
              Start([Index Analysis]) --> Missing[Find Missing Indexes]
              Missing --> Duplicate[Remove Duplicate Indexes]
              Duplicate --> Composite[Create Composite Indexes]
              Composite --> Partial[Add Partial Indexes]
              Partial --> Validate[Validate Index Usage]
              Validate --> End([Indexes Optimized])

              classDef index fill:#4caf50,stroke:#388e3c,stroke-width:2px,color:#fff
              classDef validation fill:#2196f3,stroke:#1976d2,stroke-width:2px,color:#fff
              classDef success fill:#d4edda,stroke:#28a745,stroke-width:2px

              class Missing,Duplicate,Composite,Partial index
              class Validate validation
              class Start,End success

  - id: performance_chart_002
    semantic_tags:
      - performance
      - caching
      - redis
      - memory
    context_requirements:
      must_have: ["cache_type"]
      optional: ["cache_size"]
    chart_complexity: simple
    performance_type: caching
    chart_template: |
      flowchart TB
          Start([No Caching]) --> Redis[Install Redis Server]
          Redis --> Session[Configure Session Storage]
          Session --> Cache[Enable Application Cache]
          Cache --> Assets[Setup Asset Caching]
          Assets --> CDN[Configure CDN]
          CDN --> Test[Cache Hit Ratio Test]
          Test --> End([Caching Active])

          classDef cache fill:#f44336,stroke:#d32f2f,stroke-width:2px,color:#fff
          classDef config fill:#2196f3,stroke:#1976d2,stroke-width:2px,color:#fff
          classDef success fill:#d4edda,stroke:#28a745,stroke-width:2px

          class Redis,Session,Cache cache
          class Assets,CDN,Test config
          class Start,End success

  - id: performance_chart_003
    semantic_tags:
      - performance
      - load_balancing
      - scaling
      - high_traffic
    context_requirements:
      must_have: ["load_balancer_type"]
      optional: ["server_count"]
    chart_complexity: complex
    performance_type: load_balancing
    chart_template: |
      flowchart TB
          Start([Single Server]) --> LB[Setup Load Balancer]
          LB --> App1[Application Server 1]
          LB --> App2[Application Server 2]
          LB --> AppN[Application Server N]
          App1 --> DB[Shared Database]
          App2 --> DB
          AppN --> DB
          DB --> Session[Shared Session Store]
          Session --> Monitor[Performance Monitoring]
          Monitor --> End([Load Balanced])

          classDef lb fill:#ff9800,stroke:#f57c00,stroke-width:2px,color:#fff
          classDef app fill:#2196f3,stroke:#1976d2,stroke-width:2px,color:#fff
          classDef success fill:#d4edda,stroke:#28a745,stroke-width:2px

          class LB lb
          class App1,App2,AppN app
          class DB,Session,Monitor config
          class Start,End success

  - id: performance_chart_004
    semantic_tags:
      - performance
      - database_tuning
      - postgresql_optimization
      - configuration
    context_requirements:
      must_have: ["database_type"]
      optional: ["connection_count"]
    chart_complexity: complex
    performance_type: database_tuning
    chart_template: |
      flowchart TB
          Start([Default Settings]) --> Memory[Tune Memory Settings]
          Memory --> Connections[Optimize Connection Pool]
          Connections --> Vacuum[Configure Auto-Vacuum]
          Vacuum --> WAL[Tune WAL Settings]
          WAL --> Stats[Update Statistics]
          Stats --> Replication[Setup Streaming Replication]
          Replication --> Monitor[Monitor Performance]
          Monitor --> End([Database Optimized])

          classDef tuning fill:#4caf50,stroke:#388e3c,stroke-width:2px,color:#fff
          classDef replication fill:#2196f3,stroke:#1976d2,stroke-width:2px,color:#fff
          classDef success fill:#d4edda,stroke:#28a745,stroke-width:2px

          class Memory,Connections,Vacuum,WAL,Stats tuning
          class Replication,Monitor replication
          class Start,End success

  - id: performance_chart_005
    semantic_tags:
      - performance
      - architecture_optimization
      - scalability
      - enterprise
    context_requirements:
      must_have: ["user_count"]
      optional: ["transaction_volume"]
    chart_complexity: complex
    performance_type: architecture
    chart_template: |
      flowchart TB
          Start([Monolithic Architecture]) --> Assess[Performance Assessment]
          Assess --> Separate[Separate Application & DB Tiers]
          Separate --> FileStore[Offload File Storage]
          FileStore --> Workers[Scale Worker Processes]
          Workers --> Queue[Implement Job Queue]
          Queue --> Cache[Distributed Caching]
          Cache --> CDN[Content Delivery Network]
          CDN --> Monitor[APM Monitoring]
          Monitor --> End([Scalable Architecture])

          classDef architecture fill:#9c27b0,stroke:#7b1fa2,stroke-width:2px,color:#fff
          classDef scaling fill:#2196f3,stroke:#1976d2,stroke-width:2px,color:#fff
          classDef success fill:#d4edda,stroke:#28a745,stroke-width:2px

          class Assess,Separate,FileStore architecture
          class Workers,Queue,Cache,CDN,Monitor scaling
          class Start,End success
