# Template: Troubleshooting Guide
# Template ID: troubleshooting
# Intent Type: problem_solver
# Variables Required: {{problem_type}}, {{odoo_version}}, {{component}}

metadata:
  title: "Fix {{problem_type}} in Odoo {{odoo_version}}: Complete Troubleshooting Guide"
  description: "Resolve {{problem_type}} in Odoo {{odoo_version}} within 30 minutes. Diagnostic flowcharts, root cause analysis, and permanent fixes for {{component}} issues. 95% resolution rate."
  intent_type: "problem_solver"
  page_slug: "fix-{{problem_slug}}-odoo-{{odoo_version}}"
  draft_metadata:
    created_by: "pseo-bulk-generator"
    template_id: "troubleshooting"
    generation_mode: "template"
    confidence_level: "high"

static_data:
  # New naming convention (used by main_content_templates - CRITICAL: use issue_type not problem_type!)
  issue_type: "{{issue_type}}"
  symptom_description: "{{symptom_description}}"
  odoo_version: "{{odoo_version}}"
  component: "{{component}}"

  # Content section variables
  diagnostic_approach: "{{diagnostic_approach}}"
  common_issues: "{{common_issues}}"
  troubleshooting_procedures: "{{troubleshooting_procedures}}"
  debugging_tools: "{{debugging_tools}}"
  error_message_guide: "{{error_message_guide}}"
  escalation_guidelines: "{{escalation_guidelines}}"
  preventive_monitoring: "{{preventive_monitoring}}"
  troubleshooting_conclusion: "{{troubleshooting_conclusion}}"

  # Legacy naming (for backward compatibility)
  problem_category: "{{problem_category}}"

  diagnostic_steps:
    - step: 1
      title: "Check Error Logs"
      commands:
        - "sudo tail -n 100 /var/log/odoo/odoo-server.log"
        - "sudo journalctl -u odoo -n 50"
        - "grep ERROR /var/log/odoo/odoo-server.log | tail -20"

    - step: 2
      title: "Verify {{component}} Status"
      commands:
        - "sudo systemctl status odoo"
        - "sudo -u postgres psql -c 'SELECT version();'"
        - "python3 -c 'import {{module_name}}; print({{module_name}}.__version__)'"

    - step: 3
      title: "Test {{component}} Connection"
      diagnostic_script: |
        # Test database connection
        sudo -u postgres psql -d odoo -c "\dt"
        # Check Odoo configuration
        grep -E "{{config_param}}" /etc/odoo/odoo.conf

  common_solutions:
    - error_pattern: "{{error_pattern_1}}"
      solution: "{{solution_1}}"
      commands:
        - "{{fix_command_1}}"

    - error_pattern: "{{error_pattern_2}}"
      solution: "{{solution_2}}"
      commands:
        - "{{fix_command_2}}"

  prevention_strategies:
    - "Regular system updates: apt update && apt upgrade"
    - "Monitor disk space: df -h"
    - "Check log file sizes: du -sh /var/log/odoo/*"
    - "Validate configuration: python3 odoo-bin --test-enable --stop-after-init"

  debugging_tools:
    - tool: "Odoo Shell"
      command: "python3 odoo-bin shell -d DATABASE_NAME"
      use_case: "Interactive debugging and database inspection"

    - tool: "PostgreSQL Query Analysis"
      command: "EXPLAIN ANALYZE SELECT ..."
      use_case: "Performance bottleneck identification"

  estimated_resolution_time: "15-60 minutes"
  skill_level_required: "Intermediate to Advanced"

# AI-generated content sections (standardized 4-field structure)
ai_generated_content:
  introduction: ""      # Opening paragraph (from component library)
  main_content: ""      # Main troubleshooting guide (from content_templates.py)
  conclusion: ""        # Closing paragraph (from component library)
  extended_content: ""  # Optional: FAQ, prevention tips, etc.

# Conversion assets (filled by conversion agent)
conversion_assets:
  - component_type: "urgency-banner"
    placement_hint: "mid_guide"
    generated_copy: {}

  - component_type: "benefit-list"
    placement_hint: "post_technical"
    generated_copy: {}

  - component_type: "inline-simple"
    placement_hint: "after_conclusion"
    generated_copy: {}

# Strategic internal links (filled by link architect)
intelligent_links:
  - link_type: "related_troubleshooting"
    context: "Similar {{component}} issues"
    generated_link: {}

  - link_type: "prevention_guide"
    context: "Prevent future {{problem_type}} issues"
    generated_link: {}

# Visualizations (filled by visualization agent)
visualizations:
  - chart_type: "mermaid"
    placement_hint: "after_diagnostic_steps"
    data_context: "troubleshooting_flowchart"
    mermaid_chart_syntax: ""
