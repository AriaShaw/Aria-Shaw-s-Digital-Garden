# Template: Odoo Version Upgrade Guide
# Usage: upgrade-odoo-{{source_version}}-to-{{target_version}}

metadata:
  title: "Upgrade Odoo {{source_version}} to {{target_version}}: Complete 2025 Guide"
  description: "Comprehensive guide to upgrade from Odoo {{source_version}} to {{target_version}}. Includes compatibility checks, module updates, and rollback procedures."
  intent_type: "practitioner"
  page_slug: "upgrade-odoo-{{source_version}}-to-{{target_version}}"
  
static_data:
  source_version: "{{source_version}}"
  target_version: "{{target_version}}"
  upgrade_path: "{{upgrade_path}}"
  
  upgrade_steps:
    - step: "Pre-Upgrade Assessment"
      commands:
        - "# Check current Odoo version"
        - "odoo-bin --version"
        - "# List installed modules"
        - "psql -d production_db -c \"SELECT name FROM ir_module_module WHERE state='installed';\""
        - "# Check custom module compatibility"
        - "grep -r 'openerp.osv' custom-addons/"
        
    - step: "Backup Everything"
      commands:
        - "# Full database backup"
        - "pg_dump production_db > backup_pre_upgrade_$(date +%Y%m%d).sql"
        - "# Backup filestore"
        - "tar -czf filestore_backup_$(date +%Y%m%d).tar.gz ~/.local/share/Odoo/filestore/production_db"
        - "# Backup custom addons"
        - "tar -czf addons_backup_$(date +%Y%m%d).tar.gz /opt/odoo/custom-addons"
        
    - step: "Set Up Test Environment"
      commands:
        - "# Create test database from backup"
        - "createdb test_upgrade_db"
        - "psql test_upgrade_db < backup_pre_upgrade_$(date +%Y%m%d).sql"
        - "# Clone Odoo {{target_version}} repository"
        - "git clone https://github.com/odoo/odoo --depth 1 --branch {{target_version}} /opt/odoo-{{target_version}}"
        
    - step: "Run Upgrade on Test DB"
      commands:
        - "# Update database schema"
        - "/opt/odoo-{{target_version}}/odoo-bin -d test_upgrade_db -u all --stop-after-init"
        - "# Check for errors in log"
        - "tail -n 100 /var/log/odoo/odoo-server.log"
        
    - step: "Validate Test Environment"
      tasks:
        - "Test all critical business processes"
        - "Verify custom module functionality"
        - "Check report generation"
        - "Test integrations (payment gateways, shipping, etc.)"
        
    - step: "Production Upgrade"
      commands:
        - "# Stop Odoo service"
        - "sudo systemctl stop odoo"
        - "# Switch to new version"
        - "sudo -u odoo /opt/odoo-{{target_version}}/odoo-bin -d production_db -u all --stop-after-init"
        - "# Start service"
        - "sudo systemctl start odoo"
        
  breaking_changes: "{{breaking_changes}}"
    
  module_compatibility:
    core_modules: "All standard modules compatible"
    custom_modules: "{{custom_module_notes}}"
    
  estimated_downtime: "{{downtime_estimate}}"
  
  rollback_procedure:
    - "Stop Odoo service: sudo systemctl stop odoo"
    - "Drop upgraded database: dropdb production_db"
    - "Restore backup: psql -d production_db < backup_pre_upgrade_$(date +%Y%m%d).sql"
    - "Restore filestore: tar -xzf filestore_backup_$(date +%Y%m%d).tar.gz -C ~/.local/share/Odoo/filestore/"
    - "Start Odoo with old version: sudo systemctl start odoo"
    
ai_generated_content:
  introduction: ""
  upgrade_guide: ""
  
conversion_assets:
  - component_type: "callout-box"
    placement_hint: "after_deployment_completion"
    generated_copy: {}

  - component_type: "benefit-list"
    placement_hint: "before_steps"
    generated_copy: {}

  - component_type: "cta-button"
    placement_hint: "after_conclusion"
    generated_copy: {}
