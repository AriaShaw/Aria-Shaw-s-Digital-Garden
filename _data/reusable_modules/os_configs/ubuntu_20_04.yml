
# Ubuntu 20.04 LTS (Focal Fossa) - OS Configuration Module
# Last Updated: 2025-10-30
# Data Sources: Ubuntu official docs, PostgreSQL compatibility matrix, Python version table
# Verification Status: ⚠️ LEGACY - Use only for existing systems
os_name: Ubuntu
os_version: 20.04
os_codename: Focal Fossa
os_family: Debian
release_date: 2020-04-23
support_end_date: 2025-04-23
lts_status: True
recommended_for_2025: False

# System Specifications
kernel_version: 5.4
systemd_version: 245
glibc_version: 2.31
package_manager: apt
init_system: systemd
shell_default: /bin/bash

# Python Versions
python_default: 3.8.10
python_versions_available:
  - 3.8
  - 3.9
  - 3.10
  - 3.11
python_package_prefix: python3
pip_package: python3-pip
venv_package: python3-venv

# PostgreSQL Versions
postgresql_default: 12
postgresql_versions_available:
  - 15
  - 14
  - 13
  - 12
postgresql_repo: deb https://apt.postgresql.org/pub/repos/apt/ focal-pgdg main
postgresql_key_url: https://www.postgresql.org/media/keys/ACCC4CF8.asc

# Required Repositories
repositories:
  deadsnakes:
    command: add-apt-repository ppa:deadsnakes/ppa
    description: Python 3.10+ for Odoo 18
    required: true
  multiverse:
    command: add-apt-repository multiverse
    description: Software with licensing restrictions
    required: false
  universe:
    command: add-apt-repository universe
    description: Community-maintained software
    required: true

# System Requirements for Odoo
minimum_requirements:
  disk_gb: 20
  ram_gb: 2
  swap_gb: 2
  vcpus: 1
recommended_requirements:
  disk_gb: 50
  ram_gb: 4
  swap_gb: 4
  vcpus: 2
production_requirements:
  disk_gb: 100
  ram_gb: 8
  swap_gb: 8
  vcpus: 4

# Package Installation Commands
package_commands:
  install_dependencies: apt install -y build-essential libxml2-dev libxslt1-dev libevent-dev
    libsasl2-dev libldap2-dev pkg-config libtiff5-dev libjpeg8-dev libopenjp2-7-dev
    zlib1g-dev libfreetype6-dev liblcms2-dev libwebp-dev libharfbuzz-dev libfribidi-dev
    libxcb1-dev libpq-dev
  install_nodejs: curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
    && apt install -y nodejs
  install_postgresql: apt install -y postgresql-15 postgresql-client-15
  install_python: apt install -y python3.11 python3.11-dev python3.11-venv python3-pip
  install_wkhtmltopdf: wget https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6-1/wkhtmltox_0.12.6-1.focal_amd64.deb
    && dpkg -i wkhtmltox_0.12.6-1.focal_amd64.deb
  update_system: apt update && apt upgrade -y

# Firewall Configuration
firewall:
  default_policy: deny incoming, allow outgoing
  package: ufw
  required_ports:
  - description: SSH
    port: 22
    protocol: tcp
  - description: HTTP
    port: 80
    protocol: tcp
  - description: HTTPS
    port: 443
    protocol: tcp
  - description: Odoo XML-RPC
    port: 8069
    protocol: tcp
  - description: Odoo Longpolling
    port: 8072
    protocol: tcp

# Performance Tuning
sysctl_tweaks:
  net.core.somaxconn: 1024
  net.ipv4.ip_forward: 1
  net.ipv4.tcp_fin_timeout: 20
  net.ipv4.tcp_tw_reuse: 1
  vm.overcommit_memory: 1

# Known Issues and Workarounds
known_issues:
  - issue: Python 3.8 is too old for Odoo 18
workaround: Must install Python 3.11 from deadsnakes PPA
  - issue: Support ends in April 2025
workaround: Plan migration to Ubuntu 22.04 or 24.04
  - issue: Some newer packages not available
workaround: May need to compile from source

# Odoo Compatibility
odoo_compatibility:
  odoo_15: fully_compatible
  odoo_16: fully_compatible
  odoo_17: compatible_with_python310
  odoo_18: requires_python311_from_ppa