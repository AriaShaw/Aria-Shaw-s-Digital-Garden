<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {% assign page_data = site.data.pages[page.data_key] %}

    <title>{{ page_data.metadata.title | default: page.title }}</title>
    <meta name="description" content="{{ page_data.metadata.description }}">

    <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}">
  </head>
  <body>
    <div class="wrapper">
      <section>
        {% include breadcrumbs.html %}

        <h1>{{ page_data.metadata.title }}</h1>

        <!-- Introduction -->
        {% if page_data.ai_generated_content.introduction and page_data.ai_generated_content.introduction != "" %}
        <div class="introduction">
          {{ page_data.ai_generated_content.introduction | markdownify }}
        </div>
        {% endif %}

        <!-- Test single CTA -->
        {% for asset in page_data.conversion_assets %}
          {% if asset.placement_hint == "after_introduction" %}
            <div style="border: 2px solid green; padding: 1rem; margin: 1rem 0;">
              <strong>CTA Debug:</strong>
              <br>Component Type: {{ asset.component_type }}
              <br>Headline: {{ asset.generated_copy.headline }}
              <br>Body: {{ asset.generated_copy.body }}
              <br>CTA Text: {{ asset.generated_copy.cta_text }}
            </div>
          {% endif %}
        {% endfor %}

        <!-- Test step by step guide -->
        {% if page_data.ai_generated_content.step_by_step_guide %}
        <div>
          <h2>Step-by-Step Guide</h2>
          {{ page_data.ai_generated_content.step_by_step_guide | markdownify }}
        </div>
        {% endif %}

      </section>
    </div>
  </body>
</html>
